<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Admin Dashboard - PharmaCare Pro</title>
    <link rel="stylesheet" href="../assets/css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="admin-app">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="brand">
                <i class="fas fa-pills"></i> PharmaCare Pro
            </div>
            <nav>
                <ul>
                    <li data-route="overview" class="active"><a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li data-route="medicines"><a href="#"><i class="fas fa-pills"></i> Medicines</a></li>
                    <li data-route="sales"><a href="#"><i class="fas fa-cash-register"></i> Sales</a></li>
                    <li data-route="customers"><a href="../pages/customers_complete.html"><i class="fas fa-users"></i> Customers</a></li>
                    <li data-route="suppliers"><a href="../pages/suppliers_complete.html"><i class="fas fa-truck"></i> Suppliers</a></li>
                    <li data-route="orders"><a href="../pages/customer_orders.html"><i class="fas fa-shopping-cart"></i> Customer Orders</a></li>
                    <li data-route="supplier-payments"><a href="../pages/supplier_payments.html"><i class="fas fa-money-check"></i> Supplier Payments</a></li>
                    <li data-route="expenses"><a href="../pages/expenses.html"><i class="fas fa-file-invoice-dollar"></i> Expenses</a></li>
                    <li data-route="financial-dashboard"><a href="../pages/financial_dashboard.html"><i class="fas fa-chart-line"></i> Financial Dashboard</a></li>
                    <li data-route="reports"><a href="#"><i class="fas fa-chart-bar"></i> Reports</a></li>
                    <li data-route="users"><a href="../pages/users.html"><i class="fas fa-user-cog"></i> Users</a></li>
                    <!-- Sidebar logout removed, only topbar logout remains -->
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="admin-main">
            <!-- Header/Topbar -->
            <header class="admin-header">
                                <div style="display:flex;align-items:center;gap:12px">
                                    <button id="toggleSidebar" class="btn btn-sm">☰</button>
                                    <h1 class="page-title" id="pageTitle">Dashboard Overview</h1>
                                </div>
                <div class="user-info">
                    <div id="userBox">Not signed in <button id="loginBtn" class="btn btn-sm btn-outline">Sign in</button></div>
                </div>
            </header>

            <!-- Content -->
            <div id="overview" class="admin-content">
                <!-- Quick Stats Cards -->
                <div class="cards">
                    <div class="card stat-card">
                        <div class="card-icon primary-icon"><i class="fas fa-pills"></i></div>
                        <div class="card-details">
                            <div class="card-title">Total Medicines</div>
                            <div class="card-value" id="medCount">0</div>
                            <p class="stat-label">Active inventory items</p>
                        </div>
                    </div>
                    
                    <div class="card stat-card">
                        <div class="card-icon warning-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        <div class="card-details">
                            <div class="card-title">Low Stock Items</div>
                            <div class="card-value" id="lowStockCount">0</div>
                            <p class="stat-label">Below minimum level</p>
                        </div>
                    </div>
                    
                    <div class="card stat-card">
                        <div class="card-icon danger-icon"><i class="fas fa-calendar-times"></i></div>
                        <div class="card-details">
                            <div class="card-title">Expiring Soon</div>
                            <div class="card-value" id="expiringSoon">0</div>
                            <p class="stat-label">In the next 30 days</p>
                        </div>
                    </div>
                    
                    <div class="card stat-card">
                        <div class="card-icon success-icon"><i class="fas fa-money-bill-wave"></i></div>
                        <div class="card-details">
                            <div class="card-title">Today's Sales</div>
                            <div class="card-value" id="todaySales">KSh 0.00</div>
                            <p class="stat-label">Total revenue today</p>
                        </div>
                    </div>
                </div>

                <!-- Charts and Quick Actions -->
                <div class="dashboard-grid-2col">
                    <!-- Sales Chart -->
                    <div class="card chart-card">
                        <h3 class="card-header"><i class="fas fa-chart-line"></i> Sales Performance (Last 7 Days)</h3>
                        <canvas id="salesChart" class="chart-canvas"></canvas>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card quick-actions-card">
                        <h3 class="card-header"><i class="fas fa-bolt"></i> Quick Actions</h3>
                        <div class="quick-actions-grid">
                                <a href="#" class="action-btn primary-action" onclick="openPointOfSale()">
                                    <i class="fas fa-plus-circle"></i> New Sale
                                </a>
                                <a href="#" class="action-btn secondary-action" onclick="quickAddMedicine()">
                                    <i class="fas fa-plus"></i> Add Medicine
                                </a>
                                <a href="#" class="action-btn secondary-action" onclick="viewStockLevels()">
                                    <i class="fas fa-boxes"></i> Stock Control
                                </a>
                                <a href="#" class="action-btn success-action">
                                    <i class="fas fa-user-plus"></i> Add Customer
                                </a>
                                <a href="#" class="action-btn info-action">
                                    <i class="fas fa-file-alt"></i> Generate Report
                                </a>
                        </div>
                    </div>
                </div>

                <!-- Low Stock and Recent Activity -->
                <div class="dashboard-grid-2col">
                    <!-- Recent Sales Table -->
                    <div class="card full-width-card">
                        <h3 class="card-header"><i class="fas fa-history"></i> Recent Sales Activity</h3>
                        <div class="table-responsive">
                            <table class="admin-table" id="recentSalesTable">
                                <thead>
                                    <tr>
                                        <th>Sale ID</th>
                                        <th>Customer</th>
                                        <th>Amount</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="5" class="text-center">Loading recent sales...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Low Stock Alert Table -->
                <div class="card full-width-card mt-20">
                    <h3 class="card-header"><i class="fas fa-bell"></i> Inventory Alerts (Low Stock)</h3>
                    <div class="table-responsive">
                        <table class="admin-table" id="lowStockTable">
                            <thead>
                                <tr>
                                    <th>Medicine Name</th>
                                    <th>Current Stock</th>
                                    <th>Minimum Level</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4" class="text-center">Loading low stock medicines...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Hidden listView used by admin_app.js for lists -->
            <div id="listView" class="page hidden" style="padding:24px">
              <div class="list-header" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <h2 id="listTitle"></h2>
                <input id="listSearch" placeholder="Search…" class="search-input" />
              </div>
              <div id="listContainer"></div>
            </div>
        </main>
    </div>

    <div id="authModalRoot"></div>

    <script src="../assets/vendor/chart.local.js"></script>
    <script src="../assets/js/pharmacist_dashboard.js"></script>
    <script src="../assets/js/admin_app.js"></script>
</body>
</html>